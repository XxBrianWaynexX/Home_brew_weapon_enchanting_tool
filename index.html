<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homebrew Weapon Enchanting Tool</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
    }
    select, input, button {
      margin: 10px 0;
      padding: 8px;
      width: 100%;
    }
    .success {
      color: green;
      font-weight: bold;
    }
    .failure {
      color: red;
      font-weight: bold;
    }
    .failure-effect, .quirk {
      color: darkred;
      font-weight: bold;
    }
    .weapon-output {
      font-family: 'Times New Roman', serif;
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #333;
      background: #f9f9f9;
    }
    .weapon-name {
      font-size: 24px;
      font-weight: bold;
    }
    .weapon-properties {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Homebrew Weapon Enchanting Tool</h1>

    <!-- Weapon Selection -->
    <label for="weapon">Select a Weapon Type:</label>
    <select id="weapon">
      <option value="">-- Select a Weapon --</option>
      <option value="Longsword">Longsword</option>
      <option value="Dagger">Dagger</option>
      <option value="Greatsword">Greatsword</option>
      <option value="Bow">Bow</option>
      <option value="Custom">Custom (Enter Below)</option>
    </select>
    <input type="text" id="customWeapon" placeholder="Enter custom weapon name" style="display:none;">

    <!-- Enchantment Properties -->
    <label for="attackBonus">Select Attack Bonus:</label>
    <select id="attackBonus">
      <option value="">-- No Bonus --</option>
      <option value="+1">+1</option>
      <option value="+2">+2</option>
      <option value="+3">+3</option>
    </select>

    <label for="damageType">Select Damage Type:</label>
    <select id="damageType">
      <option value="">-- Select Damage Type --</option>
      <option value="Fire">Fire</option>
      <option value="Radiant">Radiant</option>
      <option value="Necrotic">Necrotic</option>
      <option value="Cold">Cold</option>
      <option value="Lightning">Lightning</option>
      <option value="Force">Force</option>
    </select>

    <label for="specialEffects">Select Special Effects:</label>
    <select id="specialEffects" multiple>
      <option value="Foe Slayer">Foe Slayer (extra damage to specific creatures)</option>
      <option value="Detect Alignment">Detect Good/Evil or specific creatures</option>
      <option value="Flight">Grants limited flight</option>
      <option value="Combat Clairvoyance">Combat Clairvoyance (advantage for 1 round)</option>
      <option value="Vorpal">Vorpal (critical hits can decapitate)</option>
      <option value="Sharpness">Sharpness (doubles crit range)</option>
      <option value="Anarchic">Anarchic (extra damage to lawful creatures)</option>
      <option value="Axiomatic">Axiomatic (extra damage to chaotic creatures)</option>
      <option value="Brilliant Energy">Brilliant Energy (ignores non-living armor)</option>
      <option value="Dancing">Dancing weapon (fights independently)</option>
      <option value="Defending">Defending (bonus to AC)</option>
      <option value="Disruption">Disruption (destroys undead)</option>
      <option value="Flaming Burst">Flaming Burst (extra fire damage on crits)</option>
      <option value="Ghost Touch">Ghost Touch (affects incorporeal creatures)</option>
      <option value="Holy">Holy (extra damage to evil creatures)</option>
      <option value="Icy Burst">Icy Burst (extra cold damage on crits)</option>
      <option value="Keen">Keen (doubles crit range)</option>
      <option value="Ki Focus">Ki Focus (enhances ki abilities)</option>
      <option value="Seeking">Seeking (ranged, ignores cover)</option>
      <option value="Shock">Shock (deals lightning damage)</option>
      <option value="Shocking Burst">Shocking Burst (extra lightning damage on crits)</option>
      <option value="Speed">Speed (extra attack per turn)</option>
      <option value="Spell Storing">Spell Storing (stores one spell)</option>
      <option value="Unholy">Unholy (extra damage to good creatures)</option>
      <option value="Vicious">Vicious (extra damage, harms wielder)</option>
      <option value="Wounding">Wounding (prevents healing)</option>
    </select>

    <!-- Risk Roll -->
    <label for="classLevel">Enter Class Level:</label>
    <input type="number" id="classLevel" placeholder="Enter your class level" min="1" max="20">

    <label for="proficiencyBonus">Enter Proficiency Bonus:</label>
    <input type="number" id="proficiencyBonus" placeholder="Enter proficiency bonus" min="0">

    <button onclick="generateEnchantingDetails()">Generate Enchanting Details</button>
    <div id="enchantingDetails"></div>
    <button id="rollButton" style="display:none;" onclick="rollOutcome()">Attempt Enchantment</button>
    <div id="enchantmentResults"></div>
    <div id="finalWeapon"></div>
  </div>

  <script>
    const quirks = [
      "The weapon hums when held.",
      "The weapon emits faint light intermittently.",
      "The weapon becomes slightly heavier.",
      "The weapon whispers faintly to the wielder.",
      "The weapon is cold to the touch."
    ];

    function generateEnchantingDetails() {
      // Input gathering and validation from previous steps...
    }

    function rollOutcome() {
      const roll = Math.floor(Math.random() * 20) + 1;
      const result = roll >= 15 ? "success" : roll >= 10 ? "partial" : "failure";

      if (result === "success" || result === "partial") {
        const weaponName = prompt("Name your weapon:", "Unnamed Weapon") || "Unnamed Weapon";
        const finalDescription = generateWeaponDescription(weaponName, result === "partial" ? quirks[Math.floor(Math.random() * quirks.length)] : null);
        document.getElementById("finalWeapon").innerHTML = finalDescription;
      }
    }

    function generateWeaponDescription(name, quirk) {
      return `
        <div class="weapon-output">
          <div class="weapon-name">${name}</div>
          <p><em>Weapon (longsword), rare (requires attunement)</em></p>
          <p>This weapon grants a +2 bonus to attack rolls, deals cold damage, and has the Foe Slayer property (extra damage to fiends).</p>
          ${quirk ? `<p><strong>Quirk:</strong> ${quirk}</p>` : ""}
          <div class="weapon-properties">
            <p><strong>Properties:</strong></p>
            <ul>
              <li>Bonus: +2</li>
              <li>Damage: 1d8 + 2 cold damage</li>
              <li>Foe Slayer: Extra 2d6 cold damage to fiends</li>
            </ul>
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
